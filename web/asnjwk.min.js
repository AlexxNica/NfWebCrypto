(function(r){var q=function(){function d(h,m){h instanceof q?(this.j=h.j,this.position=h.position):(this.j=h,this.position=m||0)}d.prototype={J:function(){return this.j[this.position++]},r:function(d){this.j[this.position++]=d},ba:function(d){return this.j[d]},D:function(d,m,k){var l=new Uint8Array(this.j.buffer,this.position,k);d=new Uint8Array(d.buffer,m,k);l.set(d);this.position+=k},ea:function(d){this.position+=d},ka:function(){return this.j.length-this.position},show:function(){var d;return d=
"AbvStream: pos "+(this.position.toString()+" of "+this.j.length.toString())}};return d}(),d={};(function(){function l(a,b,c,d,s,e,f,g,k,h,l){this.I=a;this.G=b;this.W=c;this.$=d;this.ca=s;this.X=e;this.Y=f;this.da=g;this.Pa=k;this.H=h;this.Z=l}function h(a,b,c,d){this.I=a;this.G=b;this.Z=c;this.H=d}function m(a){this.v=a}function k(a,b,c,d,s,e){this.B=a;this.R=b||void 0;this.P=c||!1;this.S=0;this.C=d||0;this.s=s||0;this.o=e||0}function y(a,b){b.r(a.N<<6|a.M<<5|a.tag);var c=a.aa;if(128>c)b.r(c);else{for(var d=
c,e=0;d;)++e,d>>=8;b.r(128|e);for(d=0;d<e;++d)b.r(c>>8*(e-d-1)&255)}if(a.a)for(a.tag==g.i&&b.r(0),c=a.m;c;){if(!y(c,b))return!1;c=c.b}else switch(a.tag){case g.w:a.l[a.g]>>7&&b.r(0);b.D(a.l,a.g,a.h);break;case g.i:b.r(0);b.D(a.l,a.g,a.h);break;case g.A:b.D(a.l,a.g,a.h);break;case g.K:b.D(a.l,a.g,a.h)}return!0}function z(a){var b=a.J(),c=b&127;if(c==b)return c;if(3<c||0===c)return-1;for(var d=b=0;d<c;++d)b=b<<8|a.J();return b}function A(a,b,c){var d=a.l,e=new q(d,b);b+=c;c=a;var h,f,n;if(!(t++>r)){for(;e.position<
b;){n=e.J();if(31==(n&31)){for(f=0;n&128;)f<<=8,f|=n&127;n=f}h=n;f=h&31;if(0>f||30<f)return;n=z(e);if(0>n||n>e.ka())return;c.M=h&32;c.N=(h&192)>>6;c.tag=f;c.h=n;c.g=e.position;f=e;var l=h;h=n;if(l&32)f=!0;else if(l<g.i||l>g.A)f=!1;else{var m=new q(f);l==g.i&&m.ea(1);m.J()>>6&1?f=!1:(l=z(m),f=m.position-f.position+l==h)}f&&(f=e.position,h=n,c.tag==g.i&&(c.g++,c.h--,f++,h--),c.a=new k(d,c),A(c.a,f,h));c.tag==g.w&&(f=e.position,0==e.ba(f)&&e.ba(f+1)>>7&&(c.g++,c.h--));e.ea(n);e.position<b&&(c.b=new k(d,
c.parent),c=c.b)}t--;return a}}function u(a,b,c){if(9!=c)return!1;for(c=0;9>c;++c)if(a[b++]!=v[c])return!1;return!0}function w(a){if(!(a&&a.a&&a.a.b&&a.a.a&&a.a.b.a))return!1;var b=a.a.a;return u(b.l,b.g,b.h)&&2==a.u&&2==a.a.u&&2==a.a.b.a.u?!0:!1}function x(a){if(!(a&&a.a&&a.a.b&&a.a.b.a&&a.a.b.b&&a.a.b.b.a))return!1;var b=a.a.b.a;return u(b.l,b.g,b.h)&&3==a.u&&2==a.a.b.u&&9==a.a.b.b.a.u?!0:!1}function B(a){var b=e.t(),c=new m(b);c.k(e.t());c.k(e.V(v));c.c(e.U());c.T(b,e.ga(null));c.k(e.t());c.k(e.f(a.I));
c.c(e.f(a.G));return b}function C(a){a=a.a.b.a.a;var b=a.data;a=a.b;return new h(b,a.data,null,null)}function D(a){var b=e.t(),c=new m(b);c.k(e.f(new Uint8Array([0])));c.c(e.t());c.k(e.V(v));c.c(e.U());c.T(b,e.ha(null));c.k(e.t());c.k(e.f(new Uint8Array([0])));c.c(e.f(a.I));c.c(e.f(a.G));c.c(e.f(a.W));c.c(e.f(a.$));c.c(e.f(a.ca));c.c(e.f(a.X));c.c(e.f(a.Y));c.c(e.f(a.da));return b}function E(a){var b=[];a=a.a.b.b.a.a.b;for(var c=0;8>c;c++)b.push(a.data),a=a.b;return new l(b[0],b[1],b[2],b[3],b[4],
b[5],b[6],b[7])}function F(a,b,c,d){if(a instanceof h||a instanceof l){if(c)for(var e=0;e<c.length;++e)if(-1==H.indexOf(c[e]))return;b={kty:"RSA",alg:b,key_ops:void 0==c?[]:c,ext:void 0==d?!1:d,n:base64$encode(a.I,!0),e:base64$encode(a.G,!0)};a instanceof l&&(b.d=base64$encode(a.W,!0),b.p=base64$encode(a.$,!0),b.q=base64$encode(a.ca,!0),b.dp=base64$encode(a.X,!0),b.dq=base64$encode(a.Y,!0),b.qi=base64$encode(a.da,!0));return b}}function G(a){if(a.kty&&"RSA"==a.kty&&a.n&&a.e){var b="RSA1_5 RSA-OAEP RSA-OAEP-256 RSA-OAEP-384 RSA-OAEP-512 RS256 RS384 RS512".split(" ");
if(!a.alg||-1!=b.indexOf(a.alg)){b=[];a.use?"enc"==a.use?b=["encrypt","decrypt","wrap","unwrap"]:"sig"==a.use&&(b=["sign","verify"]):b=a.key_ops;var c=a.ext,d=base64$decode(a.n,!0),e=base64$decode(a.e,!0);if(a.d){var g=base64$decode(a.d,!0),f=base64$decode(a.p,!0),k=base64$decode(a.q,!0),m=base64$decode(a.dp,!0),p=base64$decode(a.dq,!0),q=base64$decode(a.qi,!0);return new l(d,e,g,f,k,m,p,q,a.alg,b,c)}return new h(d,e,c,b)}}}function p(a,b,c,d){this.F=a;this.type=b;this.H=c;this.ia=d}var g={la:0,na:1,
w:2,i:3,A:4,O:5,K:6,Aa:7,wa:8,Ca:9,ra:10,qa:11,Ma:12,Da:13,fa:16,Ha:17,ya:18,Ba:19,Ja:20,Ia:20,Na:21,va:22,La:23,sa:24,ua:25,Oa:26,xa:26,ta:27,Ka:28,pa:29,ma:30};k.prototype={m:void 0,Q:void 0,get data(){return new Uint8Array(this.B.buffer.slice(this.s,this.s+this.o))},get l(){return this.B},get M(){return this.P},set M(a){this.P=0!=a?!0:!1},get N(){return this.S},set N(a){this.S=a},get tag(){return this.C},set tag(a){this.C=a},get g(){return this.s},set g(a){this.s=a},get h(){return this.o},set h(a){this.o=
a},get a(){return this.m},set a(a){this.m=a;this.m.parent=this},get b(){return this.Q},set b(a){this.Q=a},get parent(){return this.R},set parent(a){this.R=a},get aa(){var a=0;if(this.m){for(var b=this.m;b;)a+=b.length,b=b.b;this.C==g.i&&a++}else switch(this.C){case g.w:a=this.o;this.B[this.s]>>7&&a++;break;case g.i:a=this.o+1;break;case g.A:a=this.o;break;case g.O:a=0;break;case g.K:u(this.B,this.s,this.o)&&(a=9)}return a},get length(){var a=this.aa,b;if(127<a)for(b=a;b;)b>>=8,++a;return a+2},get F(){var a=
this.length;if(a){var a=new Uint8Array(a),b=new q(a);return y(this,b)?a:void 0}},get u(){for(var a=0,b=this.m;b;)a++,b=b.b;return a}};var e={t:function(){return new k(null,null,!0,g.fa,null,null)},V:function(a){return new k(a,null,!1,g.K,0,a?a.length:0)},U:function(){return new k(null,null,!1,g.O,null,null)},ga:function(a){return new k(a,null,!1,g.i,0,a?a.length:0)},f:function(a){return new k(a,null,!1,g.w,0,a?a.length:0)},ha:function(a){return new k(a,null,!1,g.A,0,a?a.length:0)}};m.prototype={k:function(a){this.L(this.v,
a)},c:function(a){this.L(this.v.parent,a)},L:function(a,b){this.v=b;this.v.parent=a;if(a.a){for(var c=a.a;c.b;)c=c.b;c.b=b}else a.a=b},T:function(a,b){this.ja(a)&&this.L(a,b)},ja:function(a){for(var b=this.v;b;){if(a==b)return!0;b=b.parent}return!1}};var t=0,r=8,v=new Uint8Array([42,134,72,134,247,13,1,1,1]),H="sign verify encrypt decrypt wrapKey unwrapKey deriveKey deriveBits".split(" ");p.prototype.getDer=function(){return this.F};p.prototype.getType=function(){return this.type};p.prototype.getKeyOps=
function(){return this.H};p.prototype.getExtractable=function(){return this.ia};d.parse=function(a){t=0;return A(new k(a),0,a.length)};d.show=function(){};d.Ua=w;d.Ta=x;d.za=e;d.oa=m;d.Ya=g;d.Ga=h;d.Fa=l;d.Sa=B;d.Xa=function(a){a=this.parse(a);return w?C(a):void 0};d.Ra=D;d.Wa=function(a){a=this.parse(a);return x(a)?E(a):void 0};d.Qa=F;d.Va=G;d.Ea=p;d.rsaDerToJwk=function(a,b,c,d){if(a=this.parse(a)){if(w(a))a=C(a);else if(x(a))a=E(a);else return;return F(a,b,c,d)}};d.jwkToRsaDer=function(a){if(a=
G(a)){var b,c;if(a instanceof h)b="spki",c=B(a).F;else if(a instanceof l)b="pkcs8",c=D(a).F;else return;return new p(c,b,a.H,a.Z)}};d.webCryptoAlgorithmToJwkAlg=function(a){if("RSAES-PKCS1-v1_5"==a.name)return"RSA1_5";if("RSASSA-PKCS1-v1_5"==a.name){if("SHA-256"==a.hash.name)return"RS256";if("SHA-384"==a.hash.name)return"RS384";if("SHA-512"==a.hash.name)return"RS512"}};d.webCryptoUsageToJwkKeyOps=function(a){return a.map(function(a){return"wrapKey"==a?"wrap":"unwrapKey"==a?"unwrap":a})}})();r.ASN1=
d})(this);
